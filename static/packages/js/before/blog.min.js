function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}(function(){'use strict';window.addEventListener('load',function(){var form=document.getElementById('needs-validation');if(form){form.addEventListener('submit',function(event){$(".form-control:valid + .invalid-feedback").css("display","none");$(".form-control:invalid + .invalid-feedback").css("display","block");if(form.checkValidity()===!1){event.preventDefault();event.stopPropagation()}else{$("button[type=submit]").attr("disabled","disabled")}
form.classList.add('was-validated')},!1)}},!1)})();function ChangeHeight(){var original=this.style.height;this.style.height='auto';if(original!=this.scrollHeight){this.style.height=(this.scrollHeight)+'px'}else{console.log("Not updating height")}}
function StartText(){var txt=document.getElementsByTagName('textarea');for(var i=0;i<txt.length;i++){txt[i].setAttribute('style','height:'+(txt[i].scrollHeight)+'px;overflow-y:hidden;');txt[i].addEventListener("input",ChangeHeight,!1)}}
function checkTags(){var tagform=document.forms.insert_form.elements.tags;var tagmsg=document.getElementById("tag-msg");if(tagform.value.indexOf(' ')!=-1&&tagform.value.indexOf(',')==-1){tagmsg.style.display="block"}else{tagmsg.style.display="none"}}
function show_contact(){{coded="uqyNFia.zNFqaJ@IWzyi.xtW"
key="WKfChFt7lv4Ykz9nGrTJBIZXUPHeLs2ciAp6SDmNQq3doMR1E50a8OVxywugbj"
shift=coded.length
link=""
for(i=0;i<coded.length;i++){if(key.indexOf(coded.charAt(i))==-1){ltr=coded.charAt(i)
link+=(ltr)}
else{ltr=(key.indexOf(coded.charAt(i))-shift+key.length)%key.length
link+=(key.charAt(ltr))}}
document.write("<a href='mailto:"+link+"'><i class=\"v-icon-at fa fa-at\" aria-hidden=\"true\"></i> Andrew Prindle</a>")}}
function set_login_focus(){var user=document.getElementById('usernameField');var pass=document.getElementById('passwordField');if(user&&user.value){pass.focus()}else{user.focus()}}
function confirm_action(text){var agree=confirm(text);if(agree){return!0}else{return!1}}
function escapeHtml(str){var div=document.createElement('div');div.appendChild(document.createTextNode(str));var output=div.innerHTML;div=undefined;return output}
function preview_edit(){console.log("article - editing");var preview_form=document.getElementById('v-edit-preview');var edit_form=document.getElementById('v-edit');if(edit_form&&preview_form){var title=document.getElementById('inputTitle');var desc=document.getElementById('insert_desc');var body=document.getElementById('insert_body');var tags=document.getElementById('insert-tags');var img=document.getElementById('article-image');var header=document.getElementById('header-article');var imgs=document.getElementById('article-image-select');var prev_title=document.getElementById('prev-title');var prev_desc=document.getElementById('prev-desc');var prev_body=document.getElementById('prev-body');var prev_tags=document.getElementById('prev-tags');if(!title||!desc||!body||!tags||!prev_title||!prev_desc||!prev_body||!prev_tags){console.log("One of the fields was blank.");return}
var base_url=document.getElementById('base_url').value;if(img&&header){imgsrc=img.value.trim();if(imgsrc!=""){header.style.background="url('"+base_url+"imgs/"+imgsrc+"') center center no-repeat"}}else if(imgs&&header){console.log("Select image");var imgsrc=imgs.value.trim();if(imgsrc!=""){console.log("setting background");header.style.background="url('"+base_url+"imgs/"+imgsrc+"') center center no-repeat"}}
var tags_html="";var tags_array=tags.value.split(',');if(tags_array&&tags_array.length>0){for(var i=0;i<tags_array.length;i++){var cur_tag=escapeHtml(tags_array[i]);tags_html+=" <a href=\""+base_url+"tag?tag="+cur_tag+"\">"+cur_tag+"</a> "}}
prev_title.innerHTML=title.value;prev_desc.innerHTML=desc.value;prev_body.innerHTML=body.value;prev_tags.innerHTML=tags_html;edit_form.style.display='none';preview_form.style.display='block';if(rm){var html=process_markdown();preview_markdown(html);submit_markdown(html)}}}
function preview_create(){var preview_form=document.getElementById('v-edit-preview');var edit_form=document.getElementById('v-edit');console.log("article - creating");if(edit_form&&preview_form){var title=document.getElementById('inputTitle');var desc=document.getElementById('insert_desc');var body=document.getElementById('insert_body');var tags=document.getElementById('insert-tags');var img=document.getElementById('article-image');var header=document.getElementById('header-article');var imgs=document.getElementById('article-image-select');var prev_title=document.getElementById('prev-title');var prev_desc=document.getElementById('prev-desc');var prev_body=document.getElementById('prev-body');var prev_tags=document.getElementById('prev-tags');if(!title||!desc||!body||!tags||!prev_title||!prev_desc||!prev_body||!prev_tags){console.log("One of the fields was blank.");return}
var base_url=document.getElementById('base_url').value;if(img&&header){var imgsrc=img.value.trim();if(imgsrc!=""){header.style.background="url('"+base_url+"imgs/"+imgsrc+"') center center no-repeat"}}else if(imgs&&header){console.log("Select image");var imgsrc=imgs.value.trim();if(imgsrc!=""){console.log("setting background");header.style.background="url('"+base_url+"imgs/"+imgsrc+"') center center no-repeat"}}
var tags_html="";var tags_array=tags.value.split(',');if(tags_array&&tags_array.length>0){for(var i=0;i<tags_array.length;i++){var cur_tag=escapeHtml(tags_array[i]);tags_html+=" <a href=\""+base_url+"tag?tag="+cur_tag+"\">"+cur_tag+"</a> "}}
prev_title.innerHTML=title.value;prev_desc.innerHTML=desc.value;prev_body.innerHTML=body.value;prev_tags.innerHTML=tags_html;edit_form.style.display='none';preview_form.style.display='block';if(rm){var html=process_markdown();preview_markdown(html);submit_markdown(html)}}}
function preview_edit_end(){var preview_form=document.getElementById('v-edit-preview');var edit_form=document.getElementById('v-edit');if(preview_form&&edit_form){preview_form.style.display='none';edit_form.style.display='block'}}
function save_html(){if(rm){var html=process_markdown();submit_markdown(html)}}
function process_markdown(){var body=document.getElementById('insert_body');var html=rm.render(body.value);return html}
function preview_markdown(html){if(!rm){return}
var preview_form=document.getElementById('v-edit-preview');var edit_form=document.getElementById('v-edit');if(edit_form&&preview_form){var body=document.getElementById('prev-body');body.innerHTML=html}}
function submit_markdown(html){if(!rm){return}
var preview_form=document.getElementById('v-edit-preview');var edit_form=document.getElementById('v-edit');var bodymd=document.getElementById('mdhtml');if(edit_form&&preview_form&&bodymd){bodymd.value=html}}
function enable_toc(is_article=!1){console.log("TOC enabled");$(document).ready(function(){console.log("Running toc");$('#toc').toc({headings:"h1,h2,h3,h4,h5,h6",elementClass:'toc',ulClass:'nav',heading:'Table of Contents'});fix_toc(is_article);top_links()})}
function fix_toc(is_article){$("ul.toc-ul-root li").each(function(){var txt=$(this).text();if(txt=="Admin Menu"||txt=="User Menu"){console.log("Removing entry");$(this).remove()}});if(is_article){$("ul.toc-ul-root li:nth-child(2)").remove()}
if($("ul.toc-ul-root li").length<=1){$("#toc.toc").remove()}}
function top_links(){$("h1,h2").not(".v-article-title").after("<div class='a-top-div'><a class='a-top' href='#top'>Top</a></div>")}
function clearSelection(){var sel;if((sel=document.selection)&&sel.empty){sel.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}
var activeEl=document.activeElement;if(activeEl){var tagName=activeEl.nodeName.toLowerCase();if(tagName=="textarea"||(tagName=="input"&&activeEl.type=="text")){activeEl.selectionStart=activeEl.selectionEnd}}}}
function show_toast(msg="Text copied to clipboard."){$.toast({text:msg,showHideTransition:'plain',allowToastClose:!0,hideAfter:4000,stack:4,position:'bottom-right',bgColor:'#444444',textColor:'#eeeeee',textAlign:'left',loader:!1,loaderBg:'#9EC600',beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}})}