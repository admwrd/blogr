{{> common/header }}
    <!-- 
        Add hidden input field for aid
        Make hidden input field for posted (use posted_machine)
        Make hidden input field for userid
     -->
<div class="v-content" id="v-edit">
    {{~#if info.msg~}}
        {{{info.msg}}}
    {{~/if~}}
    <form method="post" action="{{action_url}}" id="insert_form" name="insert_form">
        <!-- <div class="col-md-7 mx-auto mb-3"> -->
        
        <noscript>
            <div class="v-centered-msg alert alert-warning">
                <p>Javascript is disabled.  Preview will not work.</p>
                <p>Warning: Markdown generated with javascript may be different than javascript generated by the server.</p>
            </div>
        </noscript>
        
        
        
        <!-- Title -->
        <header id="header-article-modify" class="v-article-header" style="background: url('{{info.base_url}}imgs/vishus-1.jpg') center center no-repeat;">
            <div class="v-article-header-sub">
                <h2 class="v-article-title">
                    <input name="title" type="text" value="" maxlength="120" class="v-centered-input v-form-control form-control" id="inputTitle" placeholder="Title">
                </h2>
                <div class="row">
                    <div class="v-create-note">
                        Date and author information will appear here.
                    </div>
                    <!-- <span class="v-article-date">yyyy-mm-dd @ hh:mm am</span>  -->
                    <div class="v-article-info row">
                        <div class="col"></div>
                        <div class="col">
                            <div class="v-byline"> 
                                 by 
                                <a class="v-author-link">Author</a>
                            </div>
                        </div>
                        <div class="col v-editlink"></div>
                    </div>
                    <!-- YYYY-MM-DDThh:mm:ssTZD OR PTDHMS -->
                </div>
            </div>
        </header>
        
        
        <!-- Buttons - Save Reset Preview -->
        <div class="row v-edit-buttons">
            <div class="col-auto">
                <button onclick="return confirm_action('This will reset the article to the original state, all changes that have been made since saving will be lost.  Are you sure you want to continue?');" type="reset" class="btn btn-danger" value="Reset">
                    <i class="v-icon-reset fa fa-eraser" aria-hidden="true"></i>
                    Reset
                </button>
            </div>
            <div class="col v-centered-text">
                    <button id="preview-edit-start" type="button" class="btn btn-success">
                        <i class="v-icon-preview fa fa-search" aria-hidden="true"></i>
                        Preview
                    </button>
                    <noscript>Preview functionality requires javascript.  Please enable javascript or download a browser that supports javascript.</noscript>
            </div>
            <div class="col-auto">
                <button type="submit" id="save-article" class="btn btn-primary">
                    <i class="v-icon-save fa fa-floppy-o" aria-hidden="true"></i>
                    Save Article
                </button>
            </div>
        </div>
        
        
        <!-- Image -->
        <div class="v-select-image col-md-6 mx-auto">
            <!-- <p class="v-centered-text v-image-note">Image can be left blank</p> -->
            {{~#if imgs~}}
            <label for="article-image-select" class="v-center-label v-form-label">
                <i class="v-icon-image fa fa-picture-o" aria-hidden="true"></i>
                Article Image
            </label>
            <select name="image" id="article-image-select" class="custom-select">
                {{~#each imgs~}}
                    <option value="{{this}}">{{this}}</option>
                {{/each~}}
            </select>
            {{~else~}}
            <label for="article-image" class="v-center-label v-form-label">Article Image</label>
            <input name="image" type="text" value="" maxlength="250" class="v-centered-input v-form-control form-control" id="article-image" placeholder="Image">
            {{~/if~}}
        </div>
        
        
        
        <!-- Description -->
        <div class="form-group">
            <label for="input_desc" class="v-form-label">Description</label>
            <textarea class="form-control" name="description" id="insert_desc" maxlength="400" rows="2"></textarea>
            <!-- <input name="description" type="text" class="v-form-control form-control" maxlength="250" id="insert-desc" placeholder="Description"> -->
        </div>
        
        <!-- Body -->
        <div class="form-group">
            <label for="input_body" class="v-form-label">Contents</label>
            <textarea class="form-control" name="markdown" id="insert_body" rows="3"></textarea>
        </div>
        
        <!-- Tags -->
        <div class="col-md-8 mx-auto">
            <label for="insert-tags" class="v-center-label v-form-label">
                <i class="v-icon-tags fa fa-tags" aria-hidden="true"></i>
                Tags -Comma Separated
            </label>
            <input name="tags" type="text" value="" maxlength="250" class="v-centered-input v-form-control form-control" id="insert-tags" placeholder="Tags">
            <div class="v-form-message" id="tag-msg">
                Did you mean to <b>Comma Separate</b> the tags?
            </div>
        </div>
        
        
        
        <!-- 
            Hidden input fields for non-editable fields
        <input type="hidden" name="aid" value="{{body.aid}}">
        <input type="hidden" name="posted" value="{{body.posted_machine}}">
        <input type="hidden" name="userid" value="{{body.userid}}">
        <input type="hidden" name="username" value="">
         -->
        <!-- The body hidden input field holds the html that javacsript converts from markdown -->
        <input type="hidden" name="body" id="mdhtml" value="">
        <!-- <input type="hidden" name="body" id="mdhtml" value="{{body.body}}"> -->
        
        <!-- Buttons - Save Reset Preview -->
        <div class="row v-edit-buttons">
            <div class="col-auto">
                <button onclick="return confirm_action('This will reset the article to the original state, all changes that have been made since saving will be lost.  Are you sure you want to continue?');" type="reset" class="btn btn-danger" value="Reset">
                    <i class="v-icon-reset fa fa-eraser" aria-hidden="true"></i>
                    Reset
                </button>
            </div>
            <div class="col v-centered-text">
                    <button id="preview-edit-start2" type="button" class="btn btn-success">
                        <i class="v-icon-preview fa fa-search" aria-hidden="true"></i>
                        Preview
                    </button>
                    <noscript>Preview functionality requires javascript.  Please enable javascript or download a browser that supports javascript.</noscript>
            </div>
            <div class="col-auto">
                <button type="submit" id="save-article2" class="btn btn-primary">
                    <i class="v-icon-save fa fa-floppy-o" aria-hidden="true"></i>
                    Save Article
                </button>
            </div>
        </div>
        <!-- <div class="v-submit"></div> -->
    </form>
    
    <!-- Non-form (not inside the <form>) hidden fields for JavaScript variables -->
    <div class="start-hidden">
        <input type="hidden" id="base_url" value="{{info.base_url}}">
    </div>
    
    <script>
        StartText();
    </script>
    

</div>

<!-- PREVIEW ARTICLE -->

<article id="v-edit-preview" class="start-hidden v-article v-article-single" style="background: #212529 url('{{info.base_url}}assets/sphere-trans2.png') no-repeat bottom center fixed;">
    <!-- Header -->
    <!-- <header class="v-article-header"> -->
    
    <header id="header-article" class="v-article-header"{{#if body.image}} style="background: url('{{info.base_url}}imgs/{{body.image}}') center center no-repeat"{{/if}}>
        <div class="v-article-header-sub">
            <!-- Title -->
            <!-- <h2 class="v-article-title"><a id="prev-title" href="{{info.base_url}}">Title</a></h2> -->
            <h2 class="v-article-title"><a id="prev-title">Title</a></h2>
            
            <span class="v-article-date">yyyy-mm-dd @ hh:mm am</span>
            
            <!-- <div class="v-create-note">
                Date and author information will appear here.
            </div> -->
            
            <!-- 
            <div class="row">
                <date class="v-article-date" datetime="{{body.posted_machine}}">{{body.posted_human}}</date> 
                <div class="v-byline"> 
                     by 
                    <a href="{{info.base_url}}author/{{body.userid}}/{{body.username}}" class="v-author-link">{{body.username}}</a>
                </div>
            </div>
            -->
        </div>
    </header>
    <div class="v-article-content">
        <!-- Button - End Preview -->
        <!-- 
        <div class="v-centered-text">
            <button id="preview-edit-end" type="button" class="btn btn-success">End Preview</button>
        </div>
        -->
        <div class="row">
            <div class="col-auto">
                <button onclick="return confirm_action('This will erase the contents of the new article, all changes will be lost.  Are you sure you want to continue?');" type="reset" class="v-invisible btn btn-danger" value="Reset">
                    <i class="v-icon-reset fa fa-eraser" aria-hidden="true"></i>
                    Reset
                </button>
            </div>
            <div class="col v-centered-text">
                <button id="preview-edit-end" type="button" class="btn btn-success">
                    <i class="v-icon-preview-end fa fa-search-minus" aria-hidden="true"></i>
                    End Preview
                </button>
                <noscript>Preview functionality requires javascript.  Please enable javascript or download a browser that supports javascript.</noscript>
            </div>
            <div class="col-auto">
                <button id="preview-save" type="submit" class="btn btn-primary">
                    <i class="v-icon-save fa fa-floppy-o" aria-hidden="true"></i>
                    Save Article
                </button>
            </div>
        </div>
        
        <!-- Description -->
        <div id="prev-desc">
            
        </div>
        
        <hr class="preview-divider">
        
        <!-- Body -->
        <div id="prev-body">
            <p>
                
            </p>
        </div>
        
        <!-- Tags -->
        <div id="prev-tags" class="v-article-tags">
            
        </div>
        
        <!-- Button - End Preview -->
        
        <div class="row">
            <div class="col-auto">
                <button onclick="return confirm_action('This will reset the article to the original state, all changes that have been made since saving will be lost.  Are you sure you want to continue?');" type="reset" class="v-invisible btn btn-danger" value="Reset">
                    <i class="v-icon-reset fa fa-eraser" aria-hidden="true"></i>
                    Reset
                </button>
            </div>
            <div class="col v-centered-text">
                <button id="preview-edit-end2" type="button" class="btn btn-success">
                    <i class="v-icon-preview-end fa fa-search-minus" aria-hidden="true"></i>
                    End Preview
                </button>
                <noscript>Preview functionality requires javascript.  Please enable javascript or download a browser that supports javascript.</noscript>
            </div>
            <div class="col-auto">
                <button id="preview-save2" type="submit" class="btn btn-primary">
                    <i class="v-icon-save fa fa-floppy-o" aria-hidden="true"></i>
                    Save Article
                </button>
            </div>
        </div>
           
        <!--  
        <div class="v-centered-text">
            <button id="preview-edit-end2" type="button" class="btn btn-success">End Preview</button>
        </div>
        -->
    </div>
</article>
{{> common/footer }}